import{_ as S}from"./noData-cd778682.js";import{T as B,C as V}from"./CopyText-2437a0a1.js";import{_ as z,h as Y,s as j,i as v,g as E,a as H,u as M,r as O,w as W,b as y,G as P,o as s,c as m,d as _,A as g,t as r,l as u,B as h,y as l,H as U,f as i,E as q,k as $,q as G,m as x,z as J,p as K,I as Q}from"./index-b893af8c.js";import"./TokenIcon-dca5f0f6.js";/* empty css                                                          */import"./DoubleToken-6176db89.js";const X={class:"token-list"},Z={key:0,class:"empty"},ee=["fit"],te={class:"info"},oe={key:1,class:"list"},ae={key:0},ne={key:1},se={key:2},re={key:3},le={class:"pagination"},ie={__name:"List",setup(ce){const a=Y(),T=j(),f=v(0),k=v(10),{t:I}=E();H();const C=M(),o=O({pageNumber:1,tokenList:[],loading:!1});async function N(){try{let n=await(await $.wallet.metamask.contractTokenFactory(a.create.tokenFactoryAddress)).totalOwnRecordsForUser(a.walletAddress);f.value=Number(n)}catch(e){console.error(e)}}async function w(){if(console.log("111"),!a.walletAddress){q({message:I("pleaseConnectWallet"),type:"error"}),o.loading=!1;return}o.loading=!0;let e=((o.pageNumber-1)*k.value).toString(),n=((o.pageNumber-1)*k.value+k.value-1).toString();try{if(await N(),f.value==0)throw"err";let c=await(await $.wallet.metamask.contractTokenFactory(a.create.tokenFactoryAddress)).getOwnRecords(a.walletAddress,e,n);console.log(c),o.tokenList=[];for(let d of c){let b={tokenAddress:d[6].toLowerCase(),createTime:Number(d[0]),symbol:d[4],name:d[3],chain:a.chain,deployerId:Number(d[5]),owner:d[2]};o.tokenList.push(b)}console.log(o.tokenList)}catch(p){console.log(p)}finally{o.loading=!1}}W(()=>a.isConnecting,e=>{e&&w()},{immediate:!0});function L(){w()}function A(){T.loginDialogVisible=!0}function D(){C.push("/token/create")}function F(e){C.push(`/token/manage/${e.deployerId}/${e.chain}/${e.tokenAddress}`)}return(e,n)=>{const p=y("el-button"),c=y("el-table-column"),d=y("el-table"),b=y("el-pagination"),R=P("loading");return s(),m("div",X,[!o.loading&&o.tokenList.length==0?(s(),m("div",Z,[_("img",{style:{width:"80px"},src:S,fit:e.fit},null,8,ee),_("div",te,[g(r(e.$t("noToken"))+"ï¼Œ",1),_("span",{onClick:w,style:{color:"#409eff",cursor:"pointer"}},r(e.$t("refresh")),1)]),u(a).isConnecting?(s(),h(p,{key:0,type:"primary",class:"btn-gradient create",onClick:n[0]||(n[0]=t=>D())},{default:l(()=>[g(r(e.$t("tokenCreate")),1)]),_:1})):(s(),h(p,{key:1,type:"primary",class:"btn-gradient create",onClick:n[1]||(n[1]=t=>A())},{default:l(()=>[g(r(e.$t("connectWallet")),1)]),_:1}))])):(s(),m("div",oe,[U((s(),h(d,{class:"table-mine",data:o.tokenList},{default:l(()=>[i(c,{prop:"tokenName",label:e.$t("tokenName"),width:"150"},{default:l(t=>[i(B,{class:"token-name",symbol:t.row.symbol,name:t.row.name,bigIcon:u(G)(u(a).chain.toLowerCase(),t.row.tokenAddress.toLowerCase()),smallIcon:u(x)(u(a).chain.toLowerCase())},null,8,["symbol","name","bigIcon","smallIcon"])]),_:1},8,["label"]),i(c,{prop:"amount",label:e.$t("template"),width:"150"},{default:l(t=>[t.row.deployerId==0?(s(),m("span",ae,r(e.$t("freeTax")),1)):t.row.deployerId==1?(s(),m("span",ne,r(e.$t("feeToken")),1)):t.row.deployerId==2?(s(),m("span",se,r(e.$t("selfDividendToken")),1)):t.row.deployerId==3?(s(),m("span",re,r(e.$t("addPoolDividend")),1)):J("",!0)]),_:1},8,["label"]),i(c,{prop:"amount",label:e.$t("managerAddress")},{default:l(t=>[i(V,{text:t.row.owner,smallText:u(K)(t.row.owner)},null,8,["text","smallText"])]),_:1},8,["label"]),i(c,{prop:"unlockDate",label:e.$t("createTime")},{default:l(t=>[g(r(u(Q).unix(t.row.createTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),i(c,{prop:"address",label:e.$t("operate"),width:"80"},{default:l(t=>[i(p,{key:"primary",type:"primary",onClick:de=>F(t.row),link:""},{default:l(()=>[g(r(e.$t("view")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[R,o.loading]]),_("div",le,[i(b,{background:"",layout:"prev, pager, next",total:f.value,onCurrentChange:L,"page-size":k.value,"current-page":o.pageNumber,"onUpdate:currentPage":n[2]||(n[2]=t=>o.pageNumber=t)},null,8,["total","page-size","current-page"])])]))])}}},_e=z(ie,[["__scopeId","data-v-7994ee61"]]);export{_e as default};
