import{_ as C}from"./noData-cd778682.js";import{_ as H,i as L,b as T,v as x,w as N,d as h,H as S,o as i,c as p,e as f,A as g,t as l,I as $,B as I,y as c,g as n,k as D,x as A,l as d,q as B,m as M,J as z,p as E}from"./index-645b9a47.js";import{T as R,C as Y}from"./CopyText-83980b6c.js";import{u as F}from"./index-162c9db4.js";import{e as V}from"./ethers-9947b10c.js";import"./TokenIcon-9f31aa1c.js";/* empty css                                                          */import"./DoubleToken-10278670.js";import"./wallet-214099db.js";import"./units-094ed48a.js";const j={class:"transfer-history"},U={key:0,class:"empty"},q=["fit"],J={class:"info"},P={key:1,class:"list"},W={key:0,class:"status finish"},G={key:1,class:"status fail"},K={key:2,class:"status wait"},O={class:"pagination"},Q={__name:"History",setup(X){const u=L(),m=F(),s=T({loading:!1,transferList:[],pageSize:15,pageNumber:1,totalRecords:0}),b=x(()=>s.pageNumber==1?m.transferringList.concat(s.transferList):s.transferList);async function _(){s.loading=!0;try{const e=await D.multiSend.getMultiSendHistory(u.walletAddress,s.pageSize,s.pageNumber,u.chain);if(console.log(e),e.data.status==0){if(s.totalRecords=e.data.data.total,s.transferList=e.data.data.list,m.transferringList.length>0&&e.data.data.list.length>0)for(let r in m.transferringList)e.data.data.list.find(o=>o.txHash==m.transferringList[r].txHash)&&m.transferringList.splice(r,1)}else error.value=!0}catch(e){console.log(e)}finally{s.loading=!1}}function y(e){let r=A.chainList.find(o=>o.chain==e.chain);r?window.open(r.txBlockExplorerUrl+e.txHash,"_blank"):ElMessage.error(t("unsupportedNetwork"))}return N(()=>u.isConnecting,e=>{e&&(console.log(222),_())},{immediate:!0}),(e,r)=>{const o=h("el-table-column"),k=h("el-table"),w=h("el-pagination"),v=S("loading");return i(),p("div",j,[b.value.length==0&&!s.loading?(i(),p("div",U,[f("img",{style:{width:"80px"},src:C,fit:e.fit},null,8,q),f("div",J,[g(l(e.$t("noToken"))+"ï¼Œ",1),f("span",{onClick:_,style:{color:"#409eff",cursor:"pointer"}},l(e.$t("refresh")),1)])])):(i(),p("div",P,[$((i(),I(k,{class:"table-mine",onRowClick:y,data:b.value},{default:c(()=>[n(o,{prop:"tokenName",label:e.$t("tokenName"),width:"150"},{default:c(a=>[n(R,{class:"token-name",symbol:a.row.tokenSymbol,bigIcon:d(B)(d(u).chain.toLowerCase(),a.row.tokenAddress.toLowerCase()),smallIcon:d(M)(d(u).chain.toLowerCase())},null,8,["symbol","bigIcon","smallIcon"])]),_:1},8,["label"]),n(o,{prop:"amount",label:e.$t("addressCount")},{default:c(a=>[g(l(a.row.receiverCount),1)]),_:1},8,["label"]),n(o,{prop:"amount",label:e.$t("transferAmount")},{default:c(a=>[g(l(d(V).formatEther(a.row.sendAmount)),1)]),_:1},8,["label"]),n(o,{prop:"address",label:e.$t("transferTime")},{default:c(a=>[g(l(d(z).unix(a.row.sendTime).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),n(o,{prop:"address",label:e.$t("status")},{default:c(a=>[a.row.status==0?(i(),p("span",W,l(e.$t("transferFinish")),1)):a.row.status==1?(i(),p("span",G,l(e.$t("mulTransferFail")),1)):(i(),p("span",K,l(e.$t("transferWait")),1))]),_:1},8,["label"]),n(o,{prop:"unlockDate",label:e.$t("txHash")},{default:c(a=>[n(Y,{smallText:d(E)(a.row.txHash,6),text:a.row.txHash},null,8,["smallText","text"])]),_:1},8,["label"])]),_:1},8,["data"])),[[v,s.loading]]),f("div",O,[n(w,{background:"",layout:"prev, pager, next",total:s.totalRecords,onCurrentChange:_,"page-size":s.pageSize,"current-page":s.pageNumber,"onUpdate:currentPage":r[0]||(r[0]=a=>s.pageNumber=a)},null,8,["total","page-size","current-page"])])]))])}}},ce=H(Q,[["__scopeId","data-v-7e757e98"]]);export{ce as default};
