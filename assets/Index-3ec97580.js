import{D as Q}from"./Dialog-9daba7a7.js";import{_ as Z,u as ee,f as ae,d as te,e as se,g as L,G as oe,H as le,r as C,o as p,c as y,a as w,l as k,j as t,s as c,n as S,b as l,t as n,T as M,z as ne,A as v,D as H,F as U,I as b,q as D,m as T,k as re,J as ie,p as de,K as ce,v as z,L as ue,M as me}from"./index-66fccc80.js";import{u as pe}from"./create-b0eba103.js";import{B as i}from"./bignumber-3e8dfdf6.js";import{p as O,f as ye,a as h}from"./units-ac5af918.js";/* empty css                                                       */const R=N=>(ue("data-v-c1d40838"),N=N(),me(),N),be={class:"create"},fe=R(()=>l("div",{class:"van-dialog__header"},null,-1)),_e={class:"van-dialog__content"},he={class:"van-dialog__message van-dialog__message--has-title"},we={class:"create-token-info"},ke={class:"key"},Fe={class:"value"},ve={class:"key"},Ie={class:"value"},ge={class:"token-name"},Se={class:"key"},Ce={class:"value"},Ae={class:"key"},Le={class:"value"},Te={class:"key"},Ne={class:"value"},Be={key:0},xe={class:"key"},Pe={class:"value"},$e={key:1},Re={class:"key"},We={class:"value"},Ee={key:2},Me={class:"key"},De={class:"value"},Ke={class:"tax"},Ve={class:"key"},He={key:0,class:"value"},Ue={key:1,class:"value"},ze={key:2,class:"value"},Oe={class:"tax"},Ge={class:"key"},Je={key:0,class:"value"},je={key:1,class:"value"},qe={key:2,class:"value"},Xe={class:"key"},Ye={class:"value"},Qe={key:3},Ze={class:"key"},ea={class:"value"},aa={key:4},ta={class:"key"},sa={class:"value"},oa={key:5},la={class:"key"},na={class:"value"},ra={class:"key"},ia={class:"value"},da=R(()=>l("div",{class:"open-source-item"},[l("div",{class:"open-source-item-content"},"Optimization: Yes"),l("div",null,"Runs: 200")],-1)),ca=R(()=>l("div",{class:"open-source-item"},"Solidity Version: v0.8.4+commit.c7e474f2 ",-1)),ua=R(()=>l("div",{class:"open-source-item"},"License: MIT ",-1)),ma={class:"flex-sb"},pa={class:"tags"},ya={class:"create-success-title"},ba={class:"create-success-text"},fa={class:"create-success-text"},_a={__name:"Index",setup(N){const{t:d}=ee(),G=ae(),m=te(),B=se(),e=pe(),x=L(!1),W=L(!1),K=L([]),P=L(!1),E=L(!1);oe(()=>e.deployerId,a=>{const r=H.createToken.chainList.find(o=>o.chain==m.chain);if(!r){e.baseFee=-1;return}console.dir(r);const s=r.deployerList.find(o=>o.deployerId==e.deployerId);if(!s){e.baseFee=-1;return}e.baseFee=s.baseFee});async function J(){console.log("createTokenClick");const a=/^0x[0-9a-fA-F]{40}(,\d*\.?\d+)?$/;if(m.chainId==-1){m.netErrorDialogShow=!0;return}if(!e.name){c(d("pleaseEnterName"));return}if(!e.symbol){c(d("pleaseEnterSymbol"));return}if(!e.totalSupply){c(d("pleaseEnterTotal"));return}if(!e.decimals){c(d("pleaseEnterDecimals"));return}if(e.deployerId==1||e.deployerId==2||e.deployerId==3||e.deployerId==4||e.deployerId==6||e.deployerId==7||e.deployerId==8){if(!e.token&&e.deployerId!=4){c(d("pleaseSelectCurrency"));return}if(!e.chainSwap){c(d("pleaseSelectSwap"));return}if(e.deployerId==1||e.deployerId==6){if(i(e.buyFundFee).plus(e.buyBurnFee).plus(e.buyLPFee).plus(e.sellFundFee).plus(e.sellBurnFee).plus(e.sellLPFee).lte(0)){c(d("taxMustGt0"));return}}else if(e.deployerId==2||e.deployerId==7){if(i(e.buyFundFee).plus(e.buyLPFee).plus(e.sellFundFee).plus(e.sellLPFee).lte(0)){c(d("taxlimit2"));return}}else if(e.deployerId===3||e.deployerId==8){if(!e.rewardToken){c(d("dividendTokenError"));return}if(!a.test(e.rewardToken)){c(d("pleaseEnterTrueAddress"));return}if(i(e.buyFundFee).plus(e.buyLPFee).plus(e.buyRewardFee).plus(e.sellFundFee).plus(e.sellLPFee).plus(e.sellRewardFee).lte(0)){c(d("taxMustGt0"));return}}if((Number(e.buyFundFee)>0||Number(e.sellFundFee)>0)&&!e.fundAddress){c(d("pleaseEnterMarketingAddress"));return}if(e.fundAddress&&!a.test(e.fundAddress)){c(d("pleaseEnterTrueAddress"));return}if(e.enableKillBlock&&(!e.killBlock||Number(e.killBlock)<=0)){c(d("pleaseEnterKillBlockNumber"));return}if(e.enableWalletLimit&&(!e.maxWalletAmount||Number(e.maxWalletAmount)<=0)){c(d("pleaseEnterMaxWalletLimit"));return}if(e.enableSwapLimit&&(!e.maxSwapAmount||Number(e.maxSwapAmount)<=0)){c(d("pleaseEnterMaxSwapLimit"));return}}if(P.value=!0,e.baseFee<0)return;const r=O(e.baseFee.toString()),s=await S.wallet.getBalance(m.walletAddress);if(console.log("balance",s),s<r){c(d("balanceSlow2",{chainMianCoin:m.chainCoinSymbol,amount:e.baseFee})),P.value=!1;return}x.value=!0,P.value=!1}async function V(){const a=[],r=[],s=[],o=[];if(e.deployerId==0||e.deployerId==5)a[0]=e.name,a[1]=e.symbol,s[0]=parseInt(e.decimals),s[1]=h(e.totalSupply,parseInt(e.decimals)),e.deployerId==0&&(o[0]=e.canMint);else if(e.deployerId==1||e.deployerId==6){a[0]=e.name,a[1]=e.symbol;let u=e.token.tokenAddress,f=!1;u==="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"&&(u=(await(await S.wallet.contractSwap(e.chainSwap.routerAddress)).WETH()).toLowerCase(),f=!0),r[0]=u,r[1]=e.chainSwap.routerAddress,r[2]=m.walletAddress,r[3]=e.fundAddress?e.fundAddress:"0x0000000000000000000000000000000000000000",s[0]=parseInt(e.decimals),s[1]=h(e.totalSupply,parseInt(e.decimals)),s[2]=i(e.buyFundFee).times(100).toNumber(),s[3]=i(e.buyBurnFee).times(100).toNumber(),s[4]=i(e.buyLPFee).times(100).toNumber(),s[5]=i(e.sellFundFee).times(100).toNumber(),s[6]=i(e.sellBurnFee).times(100).toNumber(),s[7]=i(e.sellLPFee).times(100).toNumber(),s[8]=e.killBlock?i(e.killBlock).toNumber():0,s[9]=e.maxSwapAmount?h(e.maxSwapAmount,parseInt(e.decimals)):0n,s[10]=e.maxWalletAmount?h(e.maxWalletAmount,parseInt(e.decimals)):0n,e.deployerId==1?(o[0]=e.canMint,o[1]=f,o[2]=e.enableManualStartTrade,o[3]=e.enableKillBlock,o[4]=e.enableSwapLimit,o[5]=e.enableWalletLimit,o[6]=e.enableChangeTax,o[7]=e.enableWhiteList):(o[0]=f,o[1]=e.enableManualStartTrade,o[2]=e.enableKillBlock,o[3]=e.enableSwapLimit,o[4]=e.enableWalletLimit,o[5]=e.enableChangeTax,o[6]=e.enableWhiteList)}else if(e.deployerId==2||e.deployerId==7){a[0]=e.name,a[1]=e.symbol;let u=e.token.tokenAddress,f=!1;u==="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"&&(u=(await(await S.wallet.contractSwap(e.chainSwap.routerAddress)).WETH()).toLowerCase(),f=!0),r[0]=u,r[1]=e.chainSwap.routerAddress,r[2]=m.walletAddress,r[3]=e.fundAddress?e.fundAddress:"0x0000000000000000000000000000000000000000",s[0]=parseInt(e.decimals),s[1]=h(e.totalSupply,parseInt(e.decimals)),s[2]=i(e.buyFundFee).times(100).toNumber(),s[3]=i(e.buyRewardFee).times(100).toNumber(),s[4]=i(e.buyLPFee).times(100).toNumber(),s[5]=i(e.sellFundFee).times(100).toNumber(),s[6]=i(e.sellRewardFee).times(100).toNumber(),s[7]=i(e.sellLPFee).times(100).toNumber(),s[8]=e.killBlock?i(e.killBlock).toNumber():0,s[9]=e.maxSwapAmount?h(e.maxSwapAmount,parseInt(e.decimals)):0n,s[10]=e.maxWalletAmount?h(e.maxWalletAmount,parseInt(e.decimals)):0n,o[0]=f,o[1]=e.enableManualStartTrade,o[2]=e.enableKillBlock,o[3]=e.enableSwapLimit,o[4]=e.enableWalletLimit,o[5]=e.enableChangeTax,o[6]=e.enableWhiteList}else if(e.deployerId==3||e.deployerId==8){a[0]=e.name,a[1]=e.symbol;let u=e.token.tokenAddress,f=!1;u==="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"&&(u=(await(await S.wallet.contractSwap(e.chainSwap.routerAddress)).WETH()).toLowerCase(),f=!0),r[0]=u,r[1]=e.chainSwap.routerAddress,r[2]=m.walletAddress,r[3]=e.fundAddress?e.fundAddress:"0x0000000000000000000000000000000000000000",r[4]=e.rewardToken,s[0]=parseInt(e.decimals),s[1]=h(e.totalSupply,parseInt(e.decimals)),s[2]=i(e.buyFundFee).times(100).toNumber(),s[3]=i(e.buyRewardFee).times(100).toNumber(),s[4]=i(e.buyLPFee).times(100).toNumber(),s[5]=i(e.sellFundFee).times(100).toNumber(),s[6]=i(e.sellRewardFee).times(100).toNumber(),s[7]=i(e.sellLPFee).times(100).toNumber(),s[8]=e.killBlock?i(e.killBlock).toNumber():0,s[9]=e.maxSwapAmount?h(e.maxSwapAmount,parseInt(e.decimals)):0n,s[10]=e.maxWalletAmount?h(e.maxWalletAmount,parseInt(e.decimals)):0n,o[0]=f,o[1]=e.enableManualStartTrade,o[2]=e.enableKillBlock,o[3]=e.enableSwapLimit,o[4]=e.enableWalletLimit,o[5]=e.enableChangeTax,o[6]=e.enableWhiteList,e.deployerId==3&&(o[7]=e.canMint)}else e.deployerId==4&&(a[0]=e.name,a[1]=e.symbol,r[0]=e.fundAddress?e.fundAddress:"0x0000000000000000000000000000000000000000",r[1]=e.rewardToken,r[2]=e.chainSwap.routerAddress,s[0]=e.maxSwapAmount?h(e.maxSwapAmount,parseInt(e.decimals)):0n,s[1]=e.maxWalletAmount?h(e.maxWalletAmount,parseInt(e.decimals)):0n,s[2]=i(e.buyFundFee).times(100).toNumber(),s[3]=i(e.buyLPFee).times(100).toNumber(),s[4]=i(e.buyRewardFee).times(100).toNumber(),s[5]=i(e.buyBurnFee).times(100).toNumber(),s[6]=i(e.sellFundFee).times(100).toNumber(),s[7]=i(e.sellLPFee).times(100).toNumber(),s[8]=i(e.sellRewardFee).times(100).toNumber(),s[9]=i(e.sellBurnFee).times(100).toNumber(),s[10]=h(e.totalSupply,parseInt(e.decimals)),s[11]=e.mustHoldNum?h(e.mustHoldNum,parseInt(e.decimals)):0n,s[12]=e.killBlock?i(e.killBlock).toNumber():0,o[0]=e.enableManualStartTrade,o[1]=e.enableKillBlock,o[2]=e.enableSwapLimit,o[3]=e.enableWalletLimit,o[4]=e.enableChangeTax,o[5]=e.enableWhiteList);return{stringParams:a,addressParams:r,numberParams:s,boolParams:o}}async function j(){E.value=!0;try{let a;B.v2?a=await S.wallet.contractTokenFactoryV2(B.tokenFactoryV2Address):a=await S.wallet.contractTokenFactory(B.tokenFactoryAddress);const{stringParams:r,addressParams:s,numberParams:o,boolParams:u}=await V();console.log(111),console.log(r,s,o,u);const f=O(e.baseFee.toString());let _;if(B.v2){let g="0x0000000000000000000000000000000000000000";m.utm&&ie(m.utm)&&(g=m.utm),console.log("create v2"),console.log(a),console.log(e.deployerId,g,r,s,o,u),_=await a.tokenCreate(e.deployerId,g,r,s,o,u,{value:f})}else console.log(e.deployerId,r,s,o,u),_=await a.tokenCreate(e.deployerId,r,s,o,u,{value:f});console.dir(_),e.txHash=_.hash;let I;m.chain=="core"&&(I=de({duration:0,forbidClick:!0,message:d("upChainNow")})),_.wait().then(async g=>{if(console.log("upChainSuccessfully"),console.log(g),g.status===1&&(c({type:"success",message:d("upChainSuccessfully")}),m.chain=="core")){I&&(I.message=d("verityContractNow")),console.log(g.logs);const $=g.logs.find(A=>A.fragment&&A.fragment.name=="TokenCreated");console.log($);const F=$.args[1];console.log(F);try{const A=await S.coredao.verifysourcecode(e.deployerId,r,s,o,u,F);await ce(500),await S.coredao.checkverifystatus(A),c({type:"success",message:d("verityContractSuccess")})}catch{c(d("verityContractFail"))}finally{I&&I.close()}}}),W.value=!0}catch(a){if(console.log(JSON.stringify(a)),a.info&&a.info.error&&a.info.error.code===4001)c(d("userCancelOperate"));else if(a.error&&a.error.message&&a.error.message=="Canceled")c(d("userCancelOperate"));else if(a.data&&a.data.code==-32e3){const r=a.data.message.match(/(\d+) want (\d+)/)[2];c(d("balanceSlow2",{chainMianCoin:lmStore.token.chainCoinSymbol,amount:ye(r)}))}else a.code==="INSUFFICIENT_FUNDS"?c(d("balanceSlow")):a.info&&a.info.error&&a.info.error.code==-32603&&a.info.error.data.message.endsWith("transfer amount exceeds balance")?c(d("balanceSlow2",{chainMianCoin:m.chainCoinSymbol,amount:e.baseFee})):a.code=="CALL_EXCEPTION"&&a.info.error.message.endsWith("transfer amount exceeds balance")?c(d("balanceSlow2",{chainMianCoin:m.chainCoinSymbol,amount:e.baseFee})):c(d("unkonwError"))}finally{x.value=!1,E.value=!1}}function q(){window.open(m.txBlockExplorerUrl+e.txHash,"_blank")}e.init(),le(()=>{console.log("create before mounted"),e.token&&e.token.chain!=m.chain&&(e.token=null),e.chainSwap&&e.chainSwap.chain!=m.chain&&(e.chainSwap=null)});async function X(){let a=await S.tools.getSourceCode(e.deployerId);z(a)}async function Y(){const{stringParams:a,addressParams:r,numberParams:s,boolParams:o}=await V();let u=S.tools.getConstructorArguments(a,r,s,o);u=u.slice(2),z(u)}return(a,r)=>{const s=C("router-view"),o=C("van-button"),u=C("van-collapse-item"),f=C("van-collapse"),_=C("van-tag"),I=C("van-action-bar-button"),g=C("van-action-bar"),$=C("van-popup");return p(),y("div",be,[w(s,{onCreateTokenClick:J,createTokenLoading:P.value},null,8,["createTokenLoading"]),w($,{show:x.value,"onUpdate:show":r[1]||(r[1]=F=>x.value=F),round:"",closeable:"",class:"van-dialog van-dialog--round-button","close-on-click-overlay":!1},{default:k(()=>[fe,l("div",_e,[l("div",he,[l("ul",we,[l("li",null,[l("div",ke,n(a.$t("contractChian")),1),l("div",Fe,[w(M,{class:"token-icon",tokenIcon:t(ne)(t(m).chain.toLowerCase())},null,8,["tokenIcon"]),v(n(t(m).chain.toUpperCase()),1)])]),l("li",null,[l("div",ve,n(a.$t("createTemplate")),1),l("div",Ie,n(a.$t(t(H).createToken.deployerList.find(F=>F.deployerId==t(e).deployerId).deployerName)),1)]),l("li",ge,[l("div",Se,n(a.$t("tokenNameSymbol")),1),l("div",Ce,n(`${t(e).name}(${t(e).symbol})`),1)]),l("li",null,[l("div",Ae,n(a.$t("tokenPrecision")),1),l("div",Le,n(t(e).decimals),1)]),l("li",null,[l("div",Te,n(a.$t("tokenAmount")),1),l("div",Ne,n(t(e).totalSupply),1)]),t(e).deployerId!=0&&t(e).deployerId!=5?(p(),y(U,{key:0},[t(e).token?(p(),y("li",Be,[l("div",xe,n(a.$t("poolToken")),1),l("div",Pe,[w(M,{class:"token-icon",tokenIcon:t(e).token.icon},null,8,["tokenIcon"]),v(n(t(e).token.symbol),1)])])):b("",!0),t(e).chainSwap?(p(),y("li",$e,[l("div",Re,n(a.$t("swap")),1),l("div",We,[w(M,{class:"token-icon",tokenIcon:t(e).chainSwap.swapIcon},null,8,["tokenIcon"]),v(n(t(e).chainSwap.showName),1)])])):b("",!0),t(e).deployerId==3||t(e).deployerId==8?(p(),y("li",Ee,[l("div",Me,n(a.$t("rewardToken")),1),l("div",De,n(t(D)(t(e).rewardToken,6)),1)])):b("",!0),l("li",Ke,[l("div",Ve,n(a.$t("buyTax1")),1),t(e).deployerId==1||t(e).deployerId==6?(p(),y("div",He,n(a.$t("buyTax1Detail",{buyFundFeeRate:t(e).buyFundFee,buyLPFeeRate:t(e).buyLPFee,buyBurnFeeRate:t(e).buyBurnFee})),1)):t(e).deployerId==2||t(e).deployerId==3||t(e).deployerId==7||t(e).deployerId==8?(p(),y("div",Ue,n(a.$t("buyTax1Detail1",{buyFundFeeRate:t(e).buyFundFee,buyLPFeeRate:t(e).buyLPFee,buyRewardFeeRate:t(e).buyRewardFee})),1)):t(e).deployerId==4?(p(),y("div",ze,n(a.$t("buyTax1Detail2",{buyFundFeeRate:t(e).buyFundFee,buyLPFeeRate:t(e).buyLPFee,buyRewardFeeRate:t(e).buyRewardFee,buyBurnFeeRate:t(e).buyBurnFee})),1)):b("",!0)]),l("li",Oe,[l("div",Ge,n(a.$t("sellTax1")),1),t(e).deployerId==1||t(e).deployerId==6?(p(),y("div",Je,n(a.$t("buyTax1Detail",{buyFundFeeRate:t(e).sellFundFee,buyLPFeeRate:t(e).sellLPFee,buyBurnFeeRate:t(e).sellBurnFee})),1)):t(e).deployerId==2||t(e).deployerId==3||t(e).deployerId==7||t(e).deployerId==8?(p(),y("div",je,n(a.$t("buyTax1Detail1",{buyFundFeeRate:t(e).sellFundFee,buyLPFeeRate:t(e).sellLPFee,buyRewardFeeRate:t(e).sellRewardFee})),1)):t(e).deployerId==4?(p(),y("div",qe,n(a.$t("buyTax1Detail2",{buyFundFeeRate:t(e).sellFundFee,buyLPFeeRate:t(e).sellLPFee,buyRewardFeeRate:t(e).sellRewardFee,buyBurnFeeRate:t(e).sellBurnFee})),1)):b("",!0)]),l("li",null,[l("div",Xe,n(a.$t("marketingAddress")),1),l("div",Ye,n(t(D)(t(e).fundAddress,6)),1)]),t(e).enableKillBlock?(p(),y("li",Qe,[l("div",Ze,n(a.$t("autoKillBlock1")),1),l("div",ea,n(t(e).killBlock),1)])):b("",!0),t(e).enableWalletLimit?(p(),y("li",aa,[l("div",ta,n(a.$t("maxWalletLimit")),1),l("div",sa,n(t(e).maxWalletAmount),1)])):b("",!0),t(e).enableSwapLimit?(p(),y("li",oa,[l("div",la,n(a.$t("maxSwapLimit")),1),l("div",na,n(t(e).maxSwapAmount),1)])):b("",!0)],64)):b("",!0),l("li",null,[l("div",ra,n(a.$t("ownerAddr")),1),l("div",ia,n(t(D)(t(m).walletAddress,6)),1)])]),w(f,{class:"open-source",modelValue:K.value,"onUpdate:modelValue":r[0]||(r[0]=F=>K.value=F)},{default:k(()=>[w(u,{title:a.$t("openSourceConfig"),name:"1"},{default:k(()=>[da,ca,ua,l("div",ma,[w(o,{class:"btn",onClick:X,type:"default"},{default:k(()=>[v(n(a.$t("copySourceCode")),1)]),_:1}),w(o,{class:"btn",onClick:Y,type:"default"},{default:k(()=>[v(n(a.$t("copyConstructorArguments")),1)]),_:1})])]),_:1},8,["title"])]),_:1},8,["modelValue"]),l("div",pa,[t(e).deployerId!==2&&t(e).deployerId<5&&t(e).canMint?(p(),T(_,{key:0,class:"tag",type:"primary",size:"medium"},{default:k(()=>[v(n(a.$t("canMint")),1)]),_:1})):b("",!0),t(e).deployerId!=0&&t(e).deployerId!=5?(p(),y(U,{key:1},[t(e).enableManualStartTrade?(p(),T(_,{key:0,type:"primary",size:"medium",class:"tag"},{default:k(()=>[v(n(a.$t("manuallyOpenTheTrading")),1)]),_:1})):b("",!0),t(e).enableWhiteList?(p(),T(_,{key:1,type:"primary",size:"medium",class:"tag"},{default:k(()=>[v(n(a.$t("whiteList2")),1)]),_:1})):b("",!0),t(e).enableChangeTax?(p(),T(_,{key:2,type:"primary",size:"medium",class:"tag"},{default:k(()=>[v(n(a.$t("taxSwitch")),1)]),_:1})):b("",!0),t(e).enableKillBlock?(p(),T(_,{key:3,type:"primary",size:"medium",class:"tag"},{default:k(()=>[v(n(a.$t("autoKillBlockTag")),1)]),_:1})):b("",!0)],64)):b("",!0)])])]),w(g,{class:"van-dialog__footer"},{default:k(()=>[w(I,{type:"danger",loading:E.value,color:"#3F80F7",text:a.$t("confirmAndCreate"),class:"van-dialog__confirm",onClick:j},null,8,["loading","text"])]),_:1})]),_:1},8,["show"]),w(Q,{show:W.value,"onUpdate:show":r[2]||(r[2]=F=>W.value=F),theme:"round-button",showCancelButton:!1,confirmButtonText:a.$t("enterTokenManagement"),onOnConfirm:r[3]||(r[3]=F=>t(G).push("/createToken"))},{default:k(()=>[l("div",null,[w(re,{name:"createSuccess",style:{width:"48px",height:"48px"}})]),l("div",ya,n(a.$t("createdSubmitted")),1),l("div",ba,[v(n(a.$t("inBrowser")),1),l("span",{class:"show",onClick:q},n(a.$t("view")),1)]),l("div",fa,n(a.$t("waitToView")),1)]),_:1},8,["show","confirmButtonText"])])}}},ga=Z(_a,[["__scopeId","data-v-c1d40838"]]);export{ga as default};
