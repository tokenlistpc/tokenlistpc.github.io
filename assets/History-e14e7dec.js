import{_ as H}from"./noData-cd778682.js";import{_ as L,i as C,b as N,v as S,w as T,d as h,H as $,o as l,c as p,e as g,A as f,t as n,I,B as x,y as d,g as i,k as D,x as A,l as c,q as B,m as M,J as z,p as E}from"./index-12733dd1.js";import{T as R}from"./CopyText.vuevuetypestyleindex0scoped0a79820blang-33009672.js";import{u as Y}from"./index-3571f17f.js";import{e as F}from"./ethers-70f79e59.js";import"./TokenIcon-9d65e4e0.js";/* empty css                                                          */import"./DoubleToken-a5bc54e6.js";import"./wallet-9c6ff676.js";import"./units-d70b5aca.js";const V={class:"transfer-history"},j={key:0,class:"empty"},U=["fit"],q={class:"info"},J={key:1,class:"list"},P={key:0,class:"status finish"},W={key:1,class:"status fail"},G={key:2,class:"status wait"},K={class:"pagination"},O={__name:"History",setup(Q){const u=C(),m=Y(),a=N({loading:!1,transferList:[],pageSize:15,pageNumber:1,totalRecords:0}),b=S(()=>a.pageNumber==1?m.transferringList.concat(a.transferList):a.transferList);async function _(){a.loading=!0;try{const e=await D.multiSend.getMultiSendHistory(u.walletAddress,a.pageSize,a.pageNumber,u.chain);if(console.log(e),e.data.status==0){if(a.totalRecords=e.data.data.total,a.transferList=e.data.data.list,m.transferringList.length>0&&e.data.data.list.length>0)for(let r in m.transferringList)e.data.data.list.find(o=>o.txHash==m.transferringList[r].txHash)&&m.transferringList.splice(r,1)}else error.value=!0}catch(e){console.log(e)}finally{a.loading=!1}}function y(e){let r=A.chainList.find(o=>o.chain==e.chain);r?window.open(r.txBlockExplorerUrl+e.txHash,"_blank"):ElMessage.error(t("unsupportedNetwork"))}return T(()=>u.isConnecting,e=>{e&&(console.log(222),_())},{immediate:!0}),(e,r)=>{const o=h("el-table-column"),k=h("el-table"),w=h("el-pagination"),v=$("loading");return l(),p("div",V,[b.value.length==0&&!a.loading?(l(),p("div",j,[g("img",{style:{width:"80px"},src:H,fit:e.fit},null,8,U),g("div",q,[f(n(e.$t("noToken"))+"ï¼Œ",1),g("span",{onClick:_,style:{color:"#409eff",cursor:"pointer"}},n(e.$t("refresh")),1)])])):(l(),p("div",J,[I((l(),x(k,{class:"table-mine",onRowClick:y,data:b.value},{default:d(()=>[i(o,{prop:"tokenName",label:e.$t("tokenName"),width:"150"},{default:d(s=>[i(R,{class:"token-name",symbol:s.row.tokenSymbol,bigIcon:c(B)(c(u).chain.toLowerCase(),s.row.tokenAddress.toLowerCase()),smallIcon:c(M)(c(u).chain.toLowerCase())},null,8,["symbol","bigIcon","smallIcon"])]),_:1},8,["label"]),i(o,{prop:"amount",label:e.$t("addressCount")},{default:d(s=>[f(n(s.row.receiverCount),1)]),_:1},8,["label"]),i(o,{prop:"amount",label:e.$t("transferAmount")},{default:d(s=>[f(n(c(F).formatEther(s.row.sendAmount)),1)]),_:1},8,["label"]),i(o,{prop:"address",label:e.$t("transferTime")},{default:d(s=>[f(n(c(z).unix(s.row.sendTime).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),i(o,{prop:"address",label:e.$t("status")},{default:d(s=>[s.row.status==0?(l(),p("span",P,n(e.$t("transferFinish")),1)):s.row.status==1?(l(),p("span",W,n(e.$t("mulTransferFail")),1)):(l(),p("span",G,n(e.$t("transferWait")),1))]),_:1},8,["label"]),i(o,{prop:"unlockDate",label:e.$t("txHash")},{default:d(s=>[f(n(c(E)(s.row.txHash,6)),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[v,a.loading]]),g("div",K,[i(w,{background:"",layout:"prev, pager, next",total:a.totalRecords,onCurrentChange:_,"page-size":a.pageSize,"current-page":a.pageNumber,"onUpdate:currentPage":r[0]||(r[0]=s=>a.pageNumber=s)},null,8,["total","page-size","current-page"])])]))])}}},le=L(O,[["__scopeId","data-v-d2a32a4a"]]);export{le as default};
