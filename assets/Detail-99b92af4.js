import{B as q}from"./Back-6b5225d6.js";import{T as U}from"./TokenName-28edded6.js";import{C as A}from"./CopyText-91c2e736.js";import{_ as z,u as H,i as F,j as I,r as P,U as j,e as b,K as O,o as l,c as f,f as t,h as u,L as G,A as p,l as i,t as a,N as K,y as w,z as T,x as y,F as J,b as m,E as Q,M as V,q as x,m as N,C as W,p as Y,a9 as X}from"./index-bac9992f.js";import{_ as Z,a as ee}from"./Index-aeab55c0.js";import{e as te}from"./ethers-6c2191a2.js";import{f as B}from"./units-75156673.js";import"./TokenIcon-e51409bf.js";/* empty css                                                          */import"./DoubleToken-a2d05928.js";/* empty css                                                            *//* empty css                                                          */import"./OperateSuccessDialog-47718939.js";import"./SelectLockDate-49a377e6.js";/* empty css                                                                */import"./wallet-1c877bcd.js";const oe={class:"token-detail"},se={class:"content"},ae={key:0},ne={class:"top"},le={class:"right"},ie={class:"lock-date"},ce={class:"left"},re={class:"right"},de={class:"left"},ke={class:"right"},me={key:0},ue={class:"left"},pe={class:"right"},ye={class:"left"},_e={class:"right"},he={key:0,class:"value"},fe={key:1,class:"value"},we={class:"left"},ge={class:"right"},Le={class:"unlock-date"},ve={class:"left"},be={class:"right"},Te={key:1,class:"operate"},Ce={__name:"Detail",props:{lockId:String,tokenType:String},setup(M){const c=M,g=H(),{t:R}=F(),L=I(!1),C=I(!1),D=I(!1),e=P({id:c.lockId,address:"",amountString:"",tokenList:[],lockDate:0,unlockDate:0,isLpToken:!1,symbol:"",chain:"",isExpired:!1,chainCoinSymbol:"",decimals:0});async function $(){L.value=!1;let n;c.tokenType=="lpTokenV3"?n=await m.wallet.metamask.contractTokenLockV3(g.lock.tokenLockV3Address):n=await m.wallet.metamask.contractTokenLockV2(g.lock.tokenLockV2Address);let o;try{console.log(c.lockId),o=await n.getLockById(c.lockId)}catch{Q.error(R("failedToGetDetail"));return}if(e.lockDate=Number(o[4]),e.unlockDate=Number(o[5]),e.tokenId=o.tokenId,e.address=o[1],e.owner=o[2],e.isExpired=V().unix()>=e.unlockDate,e.chain=g.chain,e.chainCoinSymbol=g.chainCoinSymbol,c.tokenType=="lpToken")try{const s=await m.wallet.metamask.contractLP(e.address);let r=await s.decimals();e.decimals=r;let d=await s.token0(),_=await(await m.wallet.metamask.contractERC20(d)).symbol(),h=await s.token1(),v=await(await m.wallet.metamask.contractERC20(h)).symbol();e.isLpToken=!0,e.tokenList[0]={symbol:_.toUpperCase(),address:d.toLowerCase()},e.tokenList[1]={symbol:v.toUpperCase(),address:h.toLowerCase()},e.amountString=B(o[3],r),e.symbol=`${_}/${v}`}catch(s){console.log(s)}else if(c.tokenType=="token")try{const s=await m.wallet.metamask.contractERC20(e.address);let r=await s.symbol(),d=await s.decimals();e.decimals=d,e.tokenList=[],e.isLpToken=!1,e.symbol=r.toUpperCase(),e.amountString=B(o[3],d)}catch(s){console.log(s)}else if(c.tokenType=="lpTokenV3")try{let r=await(await m.wallet.metamask.contractNFT(e.address)).positions(e.tokenId);console.log(r.token0);let d=r.token0,_=await(await m.wallet.metamask.contractERC20(d)).symbol(),h=r.token1,v=await(await m.wallet.metamask.contractERC20(h)).symbol();e.isLpToken=!0,e.tokenList[0]={symbol:_.toUpperCase(),address:d.toLowerCase()},e.tokenList[1]={symbol:v.toUpperCase(),address:h.toLowerCase()},e.liquidity=r.liquidity,e.symbol=`${_}/${v}`}catch(s){console.log(s)}console.log(e),L.value=!0}j(()=>{$()});function E(){$()}return(n,o)=>{const s=b("el-tag"),r=b("EditPen"),d=b("el-icon"),S=b("el-button"),_=b("Unlock"),h=O("loading");return l(),f(J,null,[t("div",oe,[u(q),G((l(),f("div",se,[L.value?(l(),f("ul",ae,[t("li",ne,[c.tokenType=="token"?(l(),p(U,{key:0,class:"token-name",name:e.symbol,bigIcon:i(x)(e.chain,e.address.toLocaleLowerCase()),smallIcon:i(N)(e.chain)},null,8,["name","bigIcon","smallIcon"])):(l(),p(U,{key:1,class:"token-name",name:e.symbol,token1:i(x)(e.chain,e.tokenList[0].address.toLocaleLowerCase()),token2:i(x)(e.chain,e.tokenList[1].address.toLocaleLowerCase())},null,8,["name","token1","token2"])),t("div",le,[t("span",ie,a(n.$t("unlockTime2"))+"ï¼š"+a(i(V).unix(e.lockDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("li",null,[t("div",ce,a(n.$t("contractChian")),1),t("div",re,[u(K,{icon:i(N)(e.chain),text:i(W).chainList.find(k=>k.chain==e.chain.toLowerCase()).chainShow},null,8,["icon","text"])])]),t("li",null,[t("div",de,a(n.$t("contractAddress")),1),t("div",ke,[u(A,{smallText:i(Y)(e.address),text:e.address},null,8,["smallText","text"])])]),c.tokenType=="lpTokenV3"?(l(),f("li",me,[t("div",ue,a(n.$t("tokenID")),1),t("div",pe,a(e.id),1)])):w("",!0),t("li",null,[t("div",ye,a(n.$t("lockNumber")),1),t("div",_e,[c.tokenType=="lpTokenV3"?(l(),f("div",he,a(i(te).formatEther(e.liquidity.toString())),1)):(l(),f("div",fe,a(e.amountString),1))])]),t("li",null,[t("div",we,a(n.$t("unlockTime2")),1),t("div",ge,[t("div",Le,[T(a(i(V).unix(e.unlockDate).format("YYYY-MM-DD HH:mm:ss"))+" ",1),e.isExpired?(l(),p(s,{key:0,class:"over-time tag",size:"small",type:"info"},{default:y(()=>[T(a(n.$t("expired")),1)]),_:1})):(l(),p(s,{key:1,class:"progress tag",size:"small",type:"info"},{default:y(()=>[T(a(n.$t("dayLeft",{day:i(X)(i(V).unix(e.unlockDate).toDate())})),1)]),_:1}))])])]),t("li",null,[t("div",ve,a(n.$t("lockUser")),1),t("div",be,[u(A,{smallText:i(Y)(e.owner),text:e.owner},null,8,["smallText","text"])])])])):w("",!0),L.value&&i(g).walletAddress&&e.owner.toLowerCase()==i(g).walletAddress.toLowerCase()?(l(),f("div",Te,[e.isExpired?w("",!0):(l(),p(S,{key:0,class:"btn",text:"",bg:"",type:"primary",onClick:o[0]||(o[0]=k=>D.value=!0)},{icon:y(()=>[u(d,{style:{"font-size":"16px"}},{default:y(()=>[u(r)]),_:1})]),default:y(()=>[T(" "+a(n.$t("edit")),1)]),_:1})),e.isExpired?(l(),p(S,{key:1,class:"btn",text:"",bg:"",type:"primary",onClick:o[1]||(o[1]=k=>C.value=!0)},{icon:y(()=>[u(d,null,{default:y(()=>[u(_)]),_:1})]),default:y(()=>[T(" "+a(n.$t("withdraw")),1)]),_:1})):w("",!0)])):w("",!0)])),[[h,!L.value]])]),C.value?(l(),p(Z,{key:0,onOperateSuccess:E,modelValue:C.value,"onUpdate:modelValue":o[2]||(o[2]=k=>C.value=k),lockId:e.id,isLockV2:c.tokenType!=="lpTokenV3",isLpToken:c.tokenType!=="token",unlockDate:e.unlockDate,tokenList:e.tokenList,symbol:e.symbol,address:e.address,amountString:e.amountString,chain:e.chain,decimals:e.decimals},null,8,["modelValue","lockId","isLockV2","isLpToken","unlockDate","tokenList","symbol","address","amountString","chain","decimals"])):w("",!0),D.value?(l(),p(ee,{key:1,onOperateSuccess:E,modelValue:D.value,"onUpdate:modelValue":o[3]||(o[3]=k=>D.value=k),lockId:e.id,isLockV2:c.tokenType!=="lpTokenV3",isLpToken:c.tokenType!=="token",unlockDate:e.unlockDate,tokenList:e.tokenList,symbol:e.symbol,address:e.address,amountString:e.amountString,chain:e.chain,decimals:e.decimals},null,8,["modelValue","lockId","isLockV2","isLpToken","unlockDate","tokenList","symbol","address","amountString","chain","decimals"])):w("",!0)],64)}}},He=z(Ce,[["__scopeId","data-v-4884ae70"]]);export{He as default};
