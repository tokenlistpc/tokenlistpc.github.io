import{_ as H}from"./noData-cd778682.js";import{_ as L,i as C,b as N,v as T,w as $,d as h,H as S,o as l,c as p,e as g,A as f,t as n,I,B as x,y as c,g as i,k as D,x as A,l as d,q as B,m as M,J as z,p as E}from"./index-d569c10e.js";import{T as R}from"./CopyText.vuevuetypestyleindex0scoped0a79820blang-cc8752a4.js";import{u as Y}from"./index-fbd5292f.js";import{e as F}from"./ethers-a9cd9f1e.js";import"./TokenIcon-7ae3eded.js";/* empty css                                                          */import"./DoubleToken-25a2ddca.js";import"./wallet-7e2146d7.js";import"./units-a0f6f30a.js";const V={class:"transfer-history"},j={key:0,class:"empty"},U=["fit"],q={class:"info"},J={key:1,class:"list"},P={key:0,class:"status finish"},W={key:1,class:"status fail"},G={key:2,class:"status wait"},K={class:"pagination"},O={__name:"History",setup(Q){const u=C(),m=Y(),s=N({loading:!1,transferList:[],pageSize:15,pageNumber:1,totalRecords:0}),b=T(()=>s.pageNumber==1?m.transferringList.concat(s.transferList):s.transferList);async function _(){s.loading=!0;try{const e=await D.multiSend.getMultiSendHistory(u.walletAddress,s.pageSize,s.pageNumber,u.chain);if(console.log(e),e.data.status==0){if(s.totalRecords=e.data.data.total,s.transferList=e.data.data.list,m.transferringList.length>0&&e.data.data.list.length>0)for(let r in m.transferringList)e.data.data.list.find(o=>o.txHash==m.transferringList[r].txHash)&&m.transferringList.splice(r,1)}else error.value=!0}catch(e){console.log(e)}finally{s.loading=!1}}function y(e){let r=A.chainList.find(o=>o.chain==e.chain);r?window.open(r.txBlockExplorerUrl+e.txHash,"_blank"):ElMessage.error(t("unsupportedNetwork"))}return $(()=>u.isConnecting,e=>{e&&(console.log(222),_())},{immediate:!0}),(e,r)=>{const o=h("el-table-column"),w=h("el-table"),k=h("el-pagination"),v=S("loading");return l(),p("div",V,[b.value.length==0&&!s.loading?(l(),p("div",j,[g("img",{style:{width:"80px"},src:H,fit:e.fit},null,8,U),g("div",q,[f(n(e.$t("noToken"))+"ï¼Œ",1),g("span",{onClick:_,style:{color:"#409eff",cursor:"pointer"}},n(e.$t("refresh")),1)])])):(l(),p("div",J,[I((l(),x(w,{class:"table-mine",onRowClick:y,data:b.value},{default:c(()=>[i(o,{prop:"tokenName",label:e.$t("tokenName"),width:"150"},{default:c(a=>[i(R,{class:"token-name",symbol:a.row.symbol,name:a.row.name,bigIcon:d(B)(d(u).chain.toLowerCase(),a.row.tokenAddress.toLowerCase()),smallIcon:d(M)(d(u).chain.toLowerCase())},null,8,["symbol","name","bigIcon","smallIcon"])]),_:1},8,["label"]),i(o,{prop:"amount",label:e.$t("addressCount")},{default:c(a=>[f(n(a.row.receiverCount),1)]),_:1},8,["label"]),i(o,{prop:"amount",label:e.$t("transferAmount")},{default:c(a=>[f(n(d(F).formatEther(a.row.sendAmount)),1)]),_:1},8,["label"]),i(o,{prop:"address",label:e.$t("transferTime")},{default:c(a=>[f(n(d(z).unix(a.row.sendTime).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"]),i(o,{prop:"address",label:e.$t("status")},{default:c(a=>[a.row.status==0?(l(),p("span",P,n(e.$t("transferFinish")),1)):a.row.status==1?(l(),p("span",W,n(e.$t("mulTransferFail")),1)):(l(),p("span",G,n(e.$t("transferWait")),1))]),_:1},8,["label"]),i(o,{prop:"unlockDate",label:e.$t("txHash")},{default:c(a=>[f(n(d(E)(a.row.txHash,6)),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[v,s.loading]]),g("div",K,[i(k,{background:"",layout:"prev, pager, next",total:s.totalRecords,onCurrentChange:_,"page-size":s.pageSize,"current-page":s.pageNumber,"onUpdate:currentPage":r[0]||(r[0]=a=>s.pageNumber=a)},null,8,["total","page-size","current-page"])])]))])}}},le=L(O,[["__scopeId","data-v-9acb0ee5"]]);export{le as default};
