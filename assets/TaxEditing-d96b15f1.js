import{_ as Q,d as z,Q as G,f as J,u as K,g as c,N as I,r as R,o as B,c as W,b as g,t as S,a as m,l as N,j as o,m as w,I as T,F as X,q as Y,s as x,n as Z,A as ee,v as le}from"./index-66fccc80.js";import{u as ue}from"./manage-3ae0f00d.js";import{R as F}from"./Rate-2e12acdd.js";import{B as l}from"./bignumber-3e8dfdf6.js";import{D as ae}from"./Dialog-9daba7a7.js";import"./units-ac5af918.js";/* empty css                                                       */const te={class:"rate-editing"},re={class:"buy-rate"},de={class:"title"},se={class:"sell-rate"},ie={class:"title"},oe={__name:"TaxEditing",setup(ne){z(),G(),J();const e=ue(),{t:f}=K(),V=c(!1),t=c(e.buyFundFee),r=c(e.buyLPFee),p=c(e.buyBurnFee),n=c(e.buyRewardFee),d=c(e.sellFundFee),s=c(e.sellLPFee),y=c(e.sellBurnFee),v=c(e.sellRewardFee),k=c(""),C=I(()=>f("operationHash",{hash:Y(k.value)})),$=c(!1),_=I(()=>e.deployerId==4?25:20);e.$subscribe((a,u)=>{t.value=e.buyFundFee,r.value=e.buyLPFee,p.value=e.buyBurnFee,n.value=e.buyRewardFee,d.value=e.sellFundFee,s.value=e.sellLPFee,y.value=e.sellBurnFee,v.value=e.sellRewardFee});const L=I(()=>{if(e.deployerId==1||e.deployerId==6)return l(t.value).plus(r.value).plus(p.value);if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return l(t.value).plus(r.value).plus(n.value);if(e.deployerId==4)return l(t.value).plus(r.value).plus(n.value).plus(p.value)}),U=I(()=>{if(e.deployerId==1||e.deployerId==6)return l(d.value).plus(s.value).plus(y.value);if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return l(d.value).plus(s.value).plus(v.value);if(e.deployerId==4)return l(d.value).plus(s.value).plus(v.value).plus(y.value)}),P=I(()=>{if(e.deployerId==1||e.deployerId==6)return Number(l(20).minus(r.value).minus(p.value));if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return Number(l(20).minus(r.value).minus(n.value));if(e.deployerId==4)return Number(l(25).minus(r.value).minus(n.value).minus(p.value))}),A=I(()=>{if(e.deployerId==1||e.deployerId==6)return Number(l(20).minus(t.value).minus(p.value));if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return Number(l(20).minus(t.value).minus(n.value));if(e.deployerId==4)return Number(l(25).minus(t.value).minus(n.value).minus(p.value))}),E=I(()=>{if(e.deployerId==1||e.deployerId==6)return Number(l(20).minus(t.value).minus(r.value));if(e.deployerId==4)return Number(l(25).minus(t.value).minus(r.value).minus(n.value))}),H=I(()=>{if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return Number(l(20).minus(t.value).minus(r.value).toNumber());if(e.deployerId==4)return Number(l(25).minus(t.value).minus(r.value).minus(p.value))}),h=I(()=>{if(e.deployerId==1||e.deployerId==6)return Number(l(20).minus(s.value).minus(y.value));if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return Number(l(20).minus(s.value).minus(v.value));if(e.deployerId==4)return Number(l(25).minus(s.value).minus(v.value).minus(y.value))}),q=I(()=>{if(e.deployerId==1||e.deployerId==6)return Number(l(20).minus(d.value).minus(y.value));if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return Number(l(20).minus(d.value).minus(v.value));if(e.deployerId==4)return Number(l(25).minus(d.value).minus(v.value).minus(y.value))}),D=I(()=>{if(e.deployerId==1||e.deployerId==6)return Number(l(20).minus(d.value).minus(s.value));if(e.deployerId==4)return Number(l(25).minus(d.value).minus(s.value).minus(v.value))}),O=I(()=>{if(e.deployerId==2||e.deployerId==3||e.deployerId==7||e.deployerId==8)return l(20).minus(d.value).minus(s.value).toNumber();if(e.deployerId==4)return Number(l(25).minus(d.value).minus(s.value).minus(y.value))});async function j(){if(e.deployerId==1||e.deployerId==6){if(l(t.value).plus(p.value).plus(r.value).plus(d.value).plus(y.value).plus(s.value).lte(0)){x(f("taxlimit1"));return}}else if(e.deployerId==2||e.deployerId==7){if(l(t.value).plus(r.value).plus(d.value).plus(s.value).lte(0)){x(f("taxlimit2"));return}}else if((e.deployerId==3||e.deployerId==8)&&l(t.value).plus(n.value).plus(r.value).plus(d.value).plus(v.value).plus(s.value).lte(0)){x(f("taxlimit1"));return}V.value=!0;try{const a=await Z.wallet.contract(e.tokenAddress,e.abi);let u;e.deployerId==1||e.deployerId==6?u=[l(r.value).div(100).multipliedBy(1e4).toNumber(),l(p.value).div(100).multipliedBy(1e4).toNumber(),l(t.value).div(100).multipliedBy(1e4).toNumber(),l(s.value).div(100).multipliedBy(1e4).toNumber(),l(y.value).div(100).multipliedBy(1e4).toNumber(),l(d.value).div(100).multipliedBy(1e4).toNumber()]:e.deployerId==2||e.deployerId==7?u=[l(r.value).div(100).multipliedBy(1e4).toNumber(),l(n.value).div(100).multipliedBy(1e4).toNumber(),l(t.value).div(100).multipliedBy(1e4).toNumber(),l(s.value).div(100).multipliedBy(1e4).toNumber(),l(v.value).div(100).multipliedBy(1e4).toNumber(),l(d.value).div(100).multipliedBy(1e4).toNumber()]:e.deployerId==3||e.deployerId==8?u=[l(t.value).div(100).multipliedBy(1e4).toNumber(),l(n.value).div(100).multipliedBy(1e4).toNumber(),l(r.value).div(100).multipliedBy(1e4).toNumber(),l(d.value).div(100).multipliedBy(1e4).toNumber(),l(v.value).div(100).multipliedBy(1e4).toNumber(),l(s.value).div(100).multipliedBy(1e4).toNumber()]:e.deployerId==4&&(u=[l(t.value).div(100).multipliedBy(1e4).toNumber(),l(r.value).div(100).multipliedBy(1e4).toNumber(),l(n.value).div(100).multipliedBy(1e4).toNumber(),l(p.value).div(100).multipliedBy(1e4).toNumber(),l(d.value).div(100).multipliedBy(1e4).toNumber(),l(s.value).div(100).multipliedBy(1e4).toNumber(),l(v.value).div(100).multipliedBy(1e4).toNumber(),l(y.value).div(100).multipliedBy(1e4).toNumber()]);const b=await a.completeCustoms(u);x({type:"success",message:f("submitSuccess")}),k.value=b.hash,$.value=!0,await b.wait(),e.getTokenFee(e.tokenAddress),x({type:"success",message:f("editTaxSuccessfully")})}catch(a){console.log(a),a.info&&a.info.error&&a.info.error.code===4001?x(f("userCancelOperate")):a.error&&a.error.message&&a.error.message=="Canceled"?x(f("userCancelOperate")):x(f("editTaxFail"))}finally{V.value=!1}}return(a,u)=>{const b=R("van-cell"),M=R("van-button");return B(),W(X,null,[g("div",te,[g("div",re,[g("div",de,S(a.$t("editBuyTax",{buyFee:L.value,maxBuyFee:_.value})),1),m(b,{class:"rate-cell",title:a.$t("marketingTax")},{extra:N(()=>[m(F,{value:t.value,"onUpdate:value":u[0]||(u[0]=i=>t.value=i),maxValue:P.value},null,8,["value","maxValue"])]),_:1},8,["title"]),m(b,{class:"rate-cell",title:a.$t("liquidityTax")},{extra:N(()=>[m(F,{value:r.value,"onUpdate:value":u[1]||(u[1]=i=>r.value=i),maxValue:A.value},null,8,["value","maxValue"])]),_:1},8,["title"]),o(e).deployerId==1||o(e).deployerId==4||o(e).deployerId==6?(B(),w(b,{key:0,class:"rate-cell",title:a.$t("burnTax")},{extra:N(()=>[m(F,{value:p.value,"onUpdate:value":u[2]||(u[2]=i=>p.value=i),maxValue:E.value},null,8,["value","maxValue"])]),_:1},8,["title"])):T("",!0),o(e).deployerId==2||o(e).deployerId==3||o(e).deployerId==4||o(e).deployerId==7||o(e).deployerId==8?(B(),w(b,{key:1,class:"rate-cell",title:a.$t("rewardTax")},{extra:N(()=>[m(F,{value:n.value,"onUpdate:value":u[3]||(u[3]=i=>n.value=i),maxValue:H.value},null,8,["value","maxValue"])]),_:1},8,["title"])):T("",!0)]),g("div",se,[g("div",ie,S(a.$t("editSellTax",{sellFee:U.value,maxSellFee:_.value})),1),m(b,{class:"rate-cell",title:a.$t("marketingTax")},{extra:N(()=>[m(F,{value:d.value,"onUpdate:value":u[4]||(u[4]=i=>d.value=i),maxValue:h.value},null,8,["value","maxValue"])]),_:1},8,["title"]),m(b,{class:"rate-cell",title:a.$t("liquidityTax")},{extra:N(()=>[m(F,{value:s.value,"onUpdate:value":u[5]||(u[5]=i=>s.value=i),maxValue:q.value},null,8,["value","maxValue"])]),_:1},8,["title"]),o(e).deployerId==1||o(e).deployerId==4||o(e).deployerId==6?(B(),w(b,{key:0,class:"rate-cell",title:a.$t("burnTax")},{extra:N(()=>[m(F,{value:y.value,"onUpdate:value":u[6]||(u[6]=i=>y.value=i),maxValue:D.value},null,8,["value","maxValue"])]),_:1},8,["title"])):T("",!0),o(e).deployerId==2||o(e).deployerId==3||o(e).deployerId==4||o(e).deployerId==7||o(e).deployerId==8?(B(),w(b,{key:1,class:"rate-cell",title:a.$t("rewardTax")},{extra:N(()=>[m(F,{value:v.value,"onUpdate:value":u[7]||(u[7]=i=>v.value=i),maxValue:O.value},null,8,["value","maxValue"])]),_:1},8,["title"])):T("",!0)]),m(M,{type:"primary",round:"",block:"",class:"btn",loading:V.value,onClick:j},{default:N(()=>[ee(S(a.$t("submit")),1)]),_:1},8,["loading"])]),m(ae,{show:$.value,"onUpdate:show":u[8]||(u[8]=i=>$.value=i),title:a.$t("submitSuccess"),message:C.value,showCancelButton:!1,confirmButtonText:a.$t("copyHash"),onOnConfirm:u[9]||(u[9]=i=>o(le)(k.value))},null,8,["show","title","message","confirmButtonText"])],64)}}},fe=Q(oe,[["__scopeId","data-v-aca2150c"]]);export{fe as default};
