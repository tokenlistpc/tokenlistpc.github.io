import{_ as j}from"./noData-cd778682.js";import{T as z}from"./TokenName-4d188ae8.js";import{C as T}from"./CopyText-bfc7cdc9.js";import{_ as B,u as M,s as Y,j as $,i as x,d as E,a as O,r as W,w as H,e as g,K as P,o as n,c as m,f as w,z as f,t as s,l as u,A as h,x as i,L as U,h as r,E as q,b as _,q as K,m as G,y as J,p as I,M as Q}from"./index-8c1df29a.js";import"./TokenIcon-a32bdf01.js";/* empty css                                                          */import"./DoubleToken-ad547990.js";/* empty css                                                            *//* empty css                                                          */const X={class:"token-list"},Z={key:0,class:"empty"},ee=["fit"],te={class:"info"},oe={key:1,class:"list"},ae={key:0},ne={key:1},se={key:2},re={key:3},le={key:4},ie={class:"pagination"},de={__name:"List",setup(ce){const o=M(),A=Y(),k=$(0),y=$(10),{t:L}=x();E();const C=O(),a=W({pageNumber:1,tokenList:[],loading:!1});async function N(){try{let e;o.create.v2?e=await _.wallet.metamask.contractTokenFactoryV2(o.create.tokenFactoryV2Address):e=await _.wallet.metamask.contractTokenFactory(o.create.tokenFactoryAddress);let l=await e.totalOwnRecordsForUser(o.walletAddress);k.value=Number(l)}catch(e){console.error(e)}}async function b(){if(!o.walletAddress){q.error(L("pleaseConnectWallet")),a.loading=!1;return}a.loading=!0;try{if(await N(),k.value==0)throw"noRecords";let e=k.value-((a.pageNumber-1)*y.value+y.value),l=k.value-(a.pageNumber-1)*y.value-1;e<0&&(e=0);let p;o.create.v2?p=await _.wallet.metamask.contractTokenFactoryV2(o.create.tokenFactoryV2Address):p=await _.wallet.metamask.contractTokenFactory(o.create.tokenFactoryAddress);let d=await p.getOwnRecords(o.walletAddress,e.toString(),l.toString());console.log(d),a.tokenList=[];for(let c of d){let v={tokenAddress:c[6].toLowerCase(),createTime:Number(c[0]),symbol:c[4],name:c[3],chain:o.chain,deployerId:Number(c[5]),owner:c[2]};a.tokenList.unshift(v)}console.log(a.tokenList)}catch(e){console.log(e)}finally{a.loading=!1}}H(()=>o.isConnecting,e=>{e&&(console.log(222),b())},{immediate:!0});function F(){b()}function D(){A.loginDialogVisible=!0}function V(){C.push("/token/create")}function R(e){C.push(`/token/manage/${e.deployerId}/${e.chain}/${e.tokenAddress}`)}return(e,l)=>{const p=g("el-button"),d=g("el-table-column"),c=g("el-table"),v=g("el-pagination"),S=P("loading");return n(),m("div",X,[!a.loading&&a.tokenList.length==0?(n(),m("div",Z,[w("img",{style:{width:"80px"},src:j,fit:e.fit},null,8,ee),w("div",te,[f(s(e.$t("noToken"))+"ï¼Œ",1),w("span",{onClick:b,style:{color:"#409eff",cursor:"pointer"}},s(e.$t("refresh")),1)]),u(o).isConnecting?(n(),h(p,{key:0,type:"primary",class:"btn-gradient create",onClick:l[0]||(l[0]=t=>V())},{default:i(()=>[f(s(e.$t("tokenCreate")),1)]),_:1})):(n(),h(p,{key:1,type:"primary",class:"btn-gradient create",onClick:l[1]||(l[1]=t=>D())},{default:i(()=>[f(s(e.$t("connectWallet")),1)]),_:1}))])):(n(),m("div",oe,[U((n(),h(c,{class:"table-mine",data:a.tokenList},{default:i(()=>[r(d,{label:e.$t("tokenName"),width:"150"},{default:i(t=>[r(z,{class:"token-name",symbol:t.row.symbol,name:t.row.name,bigIcon:u(K)(u(o).chain.toLowerCase(),t.row.tokenAddress.toLowerCase()),smallIcon:u(G)(u(o).chain.toLowerCase())},null,8,["symbol","name","bigIcon","smallIcon"])]),_:1},8,["label"]),r(d,{label:e.$t("template"),width:"150"},{default:i(t=>[t.row.deployerId==0||t.row.deployerId==5?(n(),m("span",ae,s(e.$t("freeTax")),1)):t.row.deployerId==1||t.row.deployerId==6?(n(),m("span",ne,s(e.$t("feeToken")),1)):t.row.deployerId==2||t.row.deployerId==7?(n(),m("span",se,s(e.$t("selfDividendToken")),1)):t.row.deployerId==3||t.row.deployerId==8?(n(),m("span",re,s(e.$t("addPoolDividend")),1)):t.row.deployerId==4?(n(),m("span",le,s(e.$t("dividendToken")),1)):J("",!0)]),_:1},8,["label"]),r(d,{label:e.$t("managerAddress")},{default:i(t=>[r(T,{text:t.row.owner,smallText:u(I)(t.row.owner)},null,8,["text","smallText"])]),_:1},8,["label"]),r(d,{label:e.$t("tokenAddress")},{default:i(t=>[r(T,{text:t.row.tokenAddress,smallText:u(I)(t.row.tokenAddress)},null,8,["text","smallText"])]),_:1},8,["label"]),r(d,{label:e.$t("createTime")},{default:i(t=>[f(s(u(Q).unix(t.row.createTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),r(d,{label:e.$t("operate"),width:"90"},{default:i(t=>[r(p,{key:"primary",type:"primary",onClick:me=>R(t.row),link:""},{default:i(()=>[f(s(e.$t("view")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[S,a.loading]]),w("div",ie,[r(v,{background:"",layout:"prev, pager, next",total:k.value,onCurrentChange:F,"page-size":y.value,"current-page":a.pageNumber,"onUpdate:currentPage":l[2]||(l[2]=t=>a.pageNumber=t)},null,8,["total","page-size","current-page"])])]))])}}},ve=B(de,[["__scopeId","data-v-5f3cf443"]]);export{ve as default};
